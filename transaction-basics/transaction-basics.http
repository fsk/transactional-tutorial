### Transaction Basics Module - HTTP Requests
### Port: 8092
### Temel Transaction Konuları (Read-Only, Timeout, Commit Timing, @TransactionalEventListener)

### Variables
@baseUrl = http://localhost:8092
@contentType = application/json

### 8. Read-only transaction testi
### Hibernate flush kapatılır, dirty checking devre dışı
GET {{baseUrl}}/api/basics/employees

###

### 9. Normal transactional write - Transaction ne zaman commit edilir?
### Method return edince (proxy dışına çıkınca)
POST {{baseUrl}}/api/basics/employee
Content-Type: {{contentType}}

{
  "name": "John Doe",
  "email": "john@example.com",
  "department": "IT",
  "salary": 5000.0
}

###

### 10. Transaction timeout testi
### Long-running transaction'ları önlemek için
POST {{baseUrl}}/api/basics/employee-timeout
Content-Type: {{contentType}}

{
  "name": "Timeout Test",
  "email": "timeout@example.com",
  "department": "IT",
  "salary": 6000.0
}

###

### Exception ile rollback testi
### Method return etmeden exception fırlatılırsa rollback olur
POST {{baseUrl}}/api/basics/employee-exception
Content-Type: {{contentType}}

{
  "name": "Exception Test",
  "email": "exception@example.com",
  "department": "IT",
  "salary": 9000.0
}

###

### 12. @TransactionalEventListener testi - AFTER_COMMIT
### Gerçekten DB commit olduktan sonra çalışır
POST {{baseUrl}}/api/basics/notification
Content-Type: {{contentType}}

{
  "message": "Test Notification",
  "recipient": "user@example.com"
}

###



